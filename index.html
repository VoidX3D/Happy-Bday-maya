<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Happy Birthday Maya!</title>
    
    <!-- Material Symbols -->
    <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Rounded:opsz,wght,FILL,GRAD@24,400,1,0" rel="stylesheet" />
    <link href="https://fonts.googleapis.com/css2?family=Pacifico&family=Plus+Jakarta+Sans:wght@300;600;800&display=swap" rel="stylesheet">
    
    <!-- Confetti Library (Internal Fallback included) -->
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>

    <style>
        :root {
            /* Material 3 Expressive Tonal Palette */
            --primary: #6750A4;
            --on-primary: #FFFFFF;
            --primary-container: #EADDFF;
            --on-primary-container: #21005D;
            --secondary: #7D5260;
            --tertiary: #B5007D;
            --surface: #FEF7FF;
            --outline: #79747E;
            --m3-radius: 32px;
        }

        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }

        body {
            margin: 0;
            padding: 0;
            font-family: 'Plus Jakarta Sans', sans-serif;
            background: var(--surface);
            color: var(--on-primary-container);
            overflow: hidden;
            height: 100vh;
        }

        /* --- Animated Vibrant Background --- */
        .bg-vibrant {
            position: fixed;
            inset: 0;
            z-index: -1;
            background: linear-gradient(120deg, #fdfbfb 0%, #ebedee 100%);
        }

        .blob {
            position: absolute;
            width: 500px;
            height: 500px;
            background: var(--primary-container);
            filter: blur(80px);
            border-radius: 50%;
            z-index: -1;
            animation: move 20s infinite alternate;
        }

        @keyframes move {
            from { transform: translate(-10%, -10%) scale(1); }
            to { transform: translate(20%, 20%) scale(1.2); }
        }

        /* --- Splash Screen (To Unlock Audio) --- */
        #gatekeeper {
            position: fixed;
            inset: 0;
            background: var(--primary);
            z-index: 9999;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            color: white;
            text-align: center;
        }

        .gift-btn {
            font-size: 120px;
            cursor: pointer;
            animation: pulse 1.5s infinite;
            display: block;
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }

        /* --- Main Layout --- */
        .main-app {
            display: none; /* Shown after click */
            height: 100vh;
            flex-direction: column;
            align-items: center;
            padding: 20px;
            overflow-y: auto;
        }

        .maya-title {
            font-family: 'Pacifico', cursive;
            font-size: clamp(3rem, 10vw, 5rem);
            color: var(--primary);
            margin: 20px 0;
            text-shadow: 4px 4px 0px var(--primary-container);
        }

        /* --- Material 3 Card --- */
        .expressive-card {
            background: rgba(255, 255, 255, 0.8);
            backdrop-filter: blur(20px);
            border-radius: var(--m3-radius);
            padding: 30px;
            width: 100%;
            max-width: 500px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            border: 1px solid white;
            text-align: center;
            margin-bottom: 30px;
        }

        /* --- Language Toggle --- */
        .toggle-container {
            display: inline-flex;
            background: var(--primary-container);
            padding: 5px;
            border-radius: 100px;
            margin-bottom: 25px;
        }

        .toggle-item {
            padding: 10px 25px;
            border-radius: 100px;
            cursor: pointer;
            font-weight: 800;
            transition: 0.3s;
            border: none;
            background: transparent;
            color: var(--primary);
        }

        .toggle-item.active {
            background: var(--primary);
            color: white;
        }

        .lyrics-box {
            font-size: 1.3rem;
            line-height: 1.6;
            min-height: 150px;
            color: var(--secondary);
            margin-bottom: 20px;
        }

        /* --- More Features Stuff --- */
        .stats-row {
            display: flex;
            justify-content: space-around;
            margin: 20px 0;
        }

        .stat-item {
            background: var(--primary-container);
            padding: 15px;
            border-radius: 20px;
            flex: 1;
            margin: 5px;
        }

        .stat-item b { display: block; font-size: 1.2rem; }

        /* --- Interactive Balloon Game --- */
        .game-zone {
            width: 100%;
            height: 150px;
            background: #eee;
            border-radius: 20px;
            position: relative;
            overflow: hidden;
            cursor: crosshair;
        }

        .balloon {
            position: absolute;
            font-size: 30px;
            cursor: pointer;
            transition: transform 0.1s;
        }

        /* --- Footer Controls --- */
        .footer-controls {
            position: fixed;
            bottom: 20px;
            display: flex;
            gap: 10px;
        }

        .fab {
            background: var(--tertiary);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 20px;
            font-weight: bold;
            box-shadow: 0 10px 20px rgba(0,0,0,0.2);
            cursor: pointer;
        }

        .hidden { display: none; }
    </style>
</head>
<body>

    <div class="bg-vibrant">
        <div class="blob"></div>
    </div>

    <!-- GATEKEEPER: Browsers block sound until this is clicked -->
    <div id="gatekeeper">
        <div class="gift-btn" onclick="startEverything()">üéÅ</div>
        <h1 style="font-family: 'Pacifico';">Open Maya's Gift</h1>
        <p>This unlocks the music and the party!</p>
    </div>

    <div class="main-app" id="app">
        <h1 class="maya-title">Maya!</h1>

        <div class="expressive-card">
            <!-- Language Toggle -->
            <div class="toggle-container">
                <button id="nl-btn" class="toggle-item active" onclick="setLanguage('nl')">Nederlands</button>
                <button id="en-btn" class="toggle-item" onclick="setLanguage('en')">English</button>
            </div>

            <!-- Lyrics Display -->
            <div id="lyrics-area" class="lyrics-box">
                "Lang zal ze leven,<br>
                Lang zal ze leven,<br>
                Lang zal ze leven in de gloria,<br>
                <b>In de gloria! HOERA!</b>"
            </div>

            <!-- Music Status -->
            <div style="font-size: 0.8rem; opacity: 0.6; margin-top: 10px;">
                <span class="material-symbols-rounded" style="vertical-align: middle;">music_note</span>
                Playing: <span id="current-song-name">Dutch Version</span>
            </div>
        </div>

        <!-- Extra Features: Stats -->
        <div class="expressive-card">
            <h3>Birthday Stats</h3>
            <div class="stats-row">
                <div class="stat-item"><b>1</b><br>Maya</div>
                <div class="stat-item"><b>100%</b><br>Happy</div>
                <div class="stat-item"><b>&infin;</b><br>Cake</div>
            </div>
        </div>

        <!-- Extra Features: Balloon Pop Game -->
        <div class="expressive-card">
            <h3>Pop Maya's Balloons!</h3>
            <div class="game-zone" id="game-zone">
                <!-- Balloons appear here -->
            </div>
            <p>Balloons Popped: <span id="score">0</span></p>
        </div>

        <div class="footer-controls">
            <button class="fab" onclick="fireworks()">FIREWORKS! üéÜ</button>
        </div>
    </div>

    <!-- AUDIO ELEMENTS -->
    <!-- Local file you have -->
    <audio id="audio-en" loop>
        <source src="hbd.mp3" type="audio/mpeg">
    </audio>

    <!-- Traditional Dutch Melody from web -->
    <audio id="audio-nl" loop>
        <source src="https://www.soundhelix.com/examples/mp3/SoundHelix-Song-16.mp3" type="audio/mpeg">
    </audio>

    <script>
        let currentLang = 'nl';
        let score = 0;

        function startEverything() {
            // Hide gatekeeper, show app
            document.getElementById('gatekeeper').style.display = 'none';
            document.getElementById('app').style.display = 'flex';
            
            // Start Dutch music by default
            playMusic();
            fireworks();
            spawnBalloon();
        }

        function setLanguage(lang) {
            currentLang = lang;
            
            // Update Buttons
            document.getElementById('nl-btn').classList.toggle('active', lang === 'nl');
            document.getElementById('en-btn').classList.toggle('active', lang === 'en');
            
            // Update Lyrics
            const lyrics = document.getElementById('lyrics-area');
            if(lang === 'nl') {
                lyrics.innerHTML = `"Lang zal ze leven,<br>Lang zal ze leven,<br>Lang zal ze leven in de gloria,<br><b>In de gloria! HOERA!</b>"`;
                document.getElementById('current-song-name').innerText = "Dutch Version";
            } else {
                lyrics.innerHTML = `"Happy birthday to you,<br>Happy birthday to you,<br>Happy birthday dear <b>Maya</b>,<br>Happy birthday to you!"`;
                document.getElementById('current-song-name').innerText = "hbd.mp3 (English)";
            }

            playMusic();
            fireworks();
        }

        function playMusic() {
            const enAudio = document.getElementById('audio-en');
            const nlAudio = document.getElementById('audio-nl');

            // Pause both first
            enAudio.pause();
            nlAudio.pause();

            if(currentLang === 'en') {
                enAudio.play().catch(e => {
                    alert("Error: 'hbd.mp3' not found in this folder!");
                });
            } else {
                nlAudio.play();
            }
        }

        function fireworks() {
            const duration = 2 * 1000;
            const end = Date.now() + duration;

            (function frame() {
                confetti({
                    particleCount: 5,
                    angle: 60,
                    spread: 55,
                    origin: { x: 0 },
                    colors: ['#6750A4', '#B5007D']
                });
                confetti({
                    particleCount: 5,
                    angle: 120,
                    spread: 55,
                    origin: { x: 1 },
                    colors: ['#6750A4', '#B5007D']
                });

                if (Date.now() < end) {
                    requestAnimationFrame(frame);
                }
            }());
        }

        // --- MINI GAME LOGIC ---
        function spawnBalloon() {
            const zone = document.getElementById('game-zone');
            const b = document.createElement('div');
            b.className = 'balloon';
            b.innerHTML = 'üéà';
            b.style.left = Math.random() * 80 + '%';
            b.style.top = '160px';
            zone.appendChild(b);

            let pos = 160;
            const id = setInterval(() => {
                if (pos < -50) {
                    clearInterval(id);
                    b.remove();
                    spawnBalloon();
                } else {
                    pos -= 2;
                    b.style.top = pos + 'px';
                }
            }, 30);

            b.onclick = () => {
                score++;
                document.getElementById('score').innerText = score;
                b.innerHTML = 'üí•';
                setTimeout(() => b.remove(), 100);
                clearInterval(id);
                spawnBalloon();
            };
        }
    </script>
</body>
</html>            background: 
                radial-gradient(at 0% 0%, hsla(253,16%,7%,1) 0, transparent 50%), 
                radial-gradient(at 50% 0%, hsla(225,39%,30%,1) 0, transparent 50%), 
                radial-gradient(at 100% 0%, hsla(339,49%,30%,1) 0, transparent 50%);
            background-color: #6750A4;
            filter: blur(100px);
            opacity: 0.15;
            animation: backgroundFlow 20s infinite alternate;
        }

        @keyframes backgroundFlow {
            0% { transform: scale(1); }
            100% { transform: scale(1.2) rotate(5deg); }
        }

        /* --- Magic Splash Screen --- */
        #splash {
            position: fixed; inset: 0;
            background: var(--md-sys-color-primary);
            z-index: 10000;
            display: flex; flex-direction: column;
            align-items: center; justify-content: center;
            color: white;
            clip-path: circle(150% at 50% 50%);
            transition: clip-path 1.2s var(--m3-easing-emphasized);
        }

        #splash.hidden { clip-path: circle(0% at 50% 50%); }

        .gift-box-wrapper {
            position: relative;
            cursor: pointer;
            transition: transform 0.3s var(--m3-easing);
        }

        .gift-box-wrapper:hover { transform: scale(1.1); }

        .gift-box { font-size: 180px; filter: drop-shadow(0 20px 40px rgba(0,0,0,0.3)); }

        .gift-shine {
            position: absolute; top: 50%; left: 50%;
            width: 300px; height: 300px;
            background: radial-gradient(circle, white 0%, transparent 70%);
            transform: translate(-50%, -50%);
            opacity: 0.3; animation: pulseShine 2s infinite;
        }

        @keyframes pulseShine { 0%, 100% { transform: translate(-50%, -50%) scale(1); opacity: 0.2; } 50% { transform: translate(-50%, -50%) scale(1.5); opacity: 0.5; } }

        /* --- Main Application Layout --- */
        .app-shell {
            display: flex; flex-direction: column;
            height: 100vh; width: 100%;
            max-width: 600px; margin: 0 auto;
            position: relative; z-index: 10;
        }

        header {
            padding: 40px 20px 20px;
            text-align: center;
        }

        .maya-logo {
            font-family: 'Pacifico', cursive;
            font-size: 5rem;
            color: var(--md-sys-color-primary);
            text-shadow: 0 10px 20px rgba(103, 80, 164, 0.2);
            margin-bottom: 5px;
        }

        /* --- Scrollable Content --- */
        .content-area {
            flex: 1; overflow-y: auto; padding: 20px;
            scroll-behavior: smooth;
            padding-bottom: 120px; /* Space for music player */
        }

        /* --- M3 Expressive Card --- */
        .card {
            background: rgba(255, 255, 255, 0.7);
            backdrop-filter: blur(20px);
            border-radius: var(--m3-radius-extra-large);
            padding: 32px;
            margin-bottom: 24px;
            border: 1px solid rgba(255,255,255,0.4);
            box-shadow: 0 10px 30px rgba(0,0,0,0.05);
            transition: transform 0.3s var(--m3-easing);
        }

        /* --- Language Segmented Control --- */
        .segmented-btn {
            display: flex; background: var(--md-sys-color-surface-variant);
            border-radius: var(--m3-radius-full);
            padding: 4px; margin-bottom: 24px;
        }

        .segment {
            flex: 1; border: none; padding: 12px;
            border-radius: var(--m3-radius-full);
            font-weight: 600; font-size: 0.9rem;
            cursor: pointer; transition: all 0.3s var(--m3-easing);
            background: transparent; color: var(--md-sys-color-on-primary-container);
            display: flex; align-items: center; justify-content: center; gap: 8px;
        }

        .segment.active {
            background: var(--md-sys-color-primary);
            color: var(--md-sys-color-on-primary);
            box-shadow: 0 4px 12px rgba(103, 80, 164, 0.2);
        }

        /* --- Music Visualizer Pulse --- */
        .visualizer-container {
            height: 60px; display: flex; align-items: center; justify-content: center;
            gap: 4px; margin: 20px 0;
        }
        .bar { width: 4px; height: 10px; background: var(--md-sys-color-primary); border-radius: 2px; }

        /* --- Mini Game: Balloon Pop --- */
        .game-area {
            height: 200px; background: var(--md-sys-color-primary-container);
            border-radius: var(--m3-radius-large);
            position: relative; overflow: hidden;
            cursor: crosshair;
        }
        .game-balloon {
            position: absolute; width: 40px; height: 50px;
            background: var(--md-sys-color-tertiary);
            border-radius: 50%; bottom: -60px;
        }

        /* --- Guestbook --- */
        .guestbook-input {
            width: 100%; padding: 16px; border-radius: var(--m3-radius-medium);
            border: 1px solid var(--md-sys-color-outline);
            background: transparent; margin-bottom: 12px;
        }

        /* --- Floating Action Button (Settings) --- */
        .fab {
            position: fixed; bottom: 100px; right: 20px;
            width: 56px; height: 56px; border-radius: 16px;
            background: var(--md-sys-color-primary-container);
            color: var(--md-sys-color-on-primary-container);
            display: flex; align-items: center; justify-content: center;
            cursor: pointer; box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            transition: transform 0.2s;
        }
        .fab:active { transform: scale(0.9); }

        /* --- Bottom Music Player --- */
        .music-player-bar {
            position: fixed; bottom: 0; left: 0; width: 100%;
            background: var(--md-sys-color-surface);
            padding: 16px 24px 32px;
            border-top: 1px solid var(--md-sys-color-surface-variant);
            display: flex; flex-direction: column; gap: 10px;
            z-index: 1000;
        }

        .progress-container { width: 100%; height: 4px; background: #ddd; border-radius: 2px; position: relative; }
        .progress-fill { height: 100%; background: var(--md-sys-color-primary); width: 0%; border-radius: 2px; }

        .player-controls { display: flex; align-items: center; justify-content: space-between; }
        .song-info b { display: block; font-size: 1rem; }
        .song-info span { font-size: 0.8rem; color: var(--md-sys-color-secondary); }

        /* --- Responsive Tweaks --- */
        @media (max-width: 480px) {
            .maya-logo { font-size: 3.5rem; }
            .card { padding: 24px; }
        }

        .hidden { display: none !important; }
    </style>
</head>
<body>

    <div class="mesh-gradient"></div>
    <canvas id="celebration-canvas"></canvas>

    <!-- üéÅ Splash Screen -->
    <div id="splash">
        <div class="gift-shine"></div>
        <div class="gift-box-wrapper" onclick="initMayaParty()">
            <div class="gift-box">üéÅ</div>
        </div>
        <h2 style="font-family: 'Space Grotesk'; font-weight: 700; letter-spacing: 2px; margin-top: 20px;">FOR MAYA</h2>
        <p style="opacity: 0.8; margin-top: 8px;">Tap to unwrap your birthday</p>
    </div>

    <!-- üì± Main Application Shell -->
    <div class="app-shell">
        <header>
            <div style="font-size: 0.8rem; text-transform: uppercase; letter-spacing: 3px; font-weight: 700; opacity: 0.6;">Birthday Celebration</div>
            <h1 class="maya-logo">Maya</h1>
        </header>

        <main class="content-area">
            <!-- Language Switcher -->
            <div class="segmented-btn">
                <button id="nl-tab" class="segment active" onclick="ui.switchLang('nl')">
                    <span class="material-symbols-rounded">castle</span> Nederlands
                </button>
                <button id="en-tab" class="segment" onclick="ui.switchLang('en')">
                    <span class="material-symbols-rounded">language</span> English
                </button>
            </div>

            <!-- Hero Celebration Card -->
            <section class="card" id="hero-card">
                <div id="lyrics-nl" class="lyrics-view">
                    <h2 style="color: var(--md-sys-color-primary); margin-bottom: 12px;">Gefeliciteerd!</h2>
                    <p style="font-size: 1.2rem; line-height: 1.6;">
                        Lang zal ze leven,<br>
                        Lang zal ze leven,<br>
                        Lang zal ze leven in de gloria,<br>
                        <b>In de gloria! In de gloria!</b>
                    </p>
                </div>
                <div id="lyrics-en" class="lyrics-view hidden">
                    <h2 style="color: var(--md-sys-color-primary); margin-bottom: 12px;">Happy Birthday!</h2>
                    <p style="font-size: 1.2rem; line-height: 1.6;">
                        Happy birthday to you,<br>
                        Happy birthday to you,<br>
                        Happy birthday dear <b>Maya</b>,<br>
                        Happy birthday to you!
                    </p>
                </div>
                
                <div class="visualizer-container" id="visualizer">
                    <!-- Bars injected by JS -->
                </div>

                <button class="segment active" style="width: 100%; margin-top: 20px;" onclick="party.blast()">
                    <span class="material-symbols-rounded">celebration</span> CELEBRATE!
                </button>
            </section>

            <!-- Balloon Mini Game -->
            <section class="card">
                <h3 style="margin-bottom: 15px; display: flex; align-items: center; gap: 8px;">
                    <span class="material-symbols-rounded">sports_esports</span> Pop-a-Balloon
                </h3>
                <div class="game-area" id="game-canvas">
                    <p style="text-align: center; margin-top: 80px; opacity: 0.5;">Wait for balloons...</p>
                </div>
                <div style="margin-top: 10px; font-weight: 700; font-size: 0.9rem;">SCORE: <span id="score">0</span></div>
            </section>

            <!-- Guestbook -->
            <section class="card">
                <h3 style="margin-bottom: 15px;">Maya's Guestbook</h3>
                <input type="text" id="guest-name" class="guestbook-input" placeholder="Your Name">
                <textarea id="guest-msg" class="guestbook-input" placeholder="Leave a wish..." rows="3"></textarea>
                <button class="segment" style="background: var(--md-sys-color-primary-container);" onclick="ui.saveWish()">
                    Post Wish
                </button>
                <div id="wishes-list" style="margin-top: 20px; font-size: 0.9rem;"></div>
            </section>
        </main>

        <!-- üéµ Persistent Music Player -->
        <div class="music-player-bar">
            <div class="progress-container" onclick="audio.seek(event)">
                <div class="progress-fill" id="audio-progress"></div>
            </div>
            <div class="player-controls">
                <div class="song-info">
                    <b id="song-title">Birthday Song</b>
                    <span id="song-subtitle">English Version</span>
                </div>
                <div style="display: flex; gap: 15px;">
                    <button class="segment" style="width: 48px; padding: 0;" onclick="audio.togglePlay()">
                        <span class="material-symbols-rounded" id="play-icon">pause</span>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <audio id="main-audio" loop>
        <source id="audio-source" src="hbd.mp3" type="audio/mpeg">
    </audio>

    <script>
        /**
         * MAYA BIRTHDAY APP ENGINE
         * An all-in-one controller for State, Audio, Party, and UI.
         */

        const state = {
            currentLang: 'nl',
            isPlaying: false,
            score: 0,
            unlocked: false,
            wishes: JSON.parse(localStorage.getItem('mayaWishes') || '[]'),
            audioSources: {
                en: 'hbd.mp3',
                nl: 'https://www.soundhelix.com/examples/mp3/SoundHelix-Song-16.mp3' // Dutch instrumental example
            }
        };

        // --- AUDIO CONTROLLER ---
        const audio = {
            el: document.getElementById('main-audio'),
            source: document.getElementById('audio-source'),
            
            init() {
                this.el.addEventListener('timeupdate', () => {
                    const percent = (this.el.currentTime / this.el.duration) * 100;
                    document.getElementById('audio-progress').style.width = percent + '%';
                });
            },

            togglePlay() {
                if (this.el.paused) {
                    this.el.play();
                    document.getElementById('play-icon').innerText = 'pause';
                } else {
                    this.el.pause();
                    document.getElementById('play-icon').innerText = 'play_arrow';
                }
            },

            updateSource(lang) {
                const wasPlaying = !this.el.paused;
                this.source.src = state.audioSources[lang];
                this.el.load();
                if (wasPlaying || state.unlocked) this.el.play();
                document.getElementById('song-subtitle').innerText = lang === 'nl' ? 'Nederlandse Versie' : 'English Version';
            },

            seek(e) {
                const rect = e.target.getBoundingClientRect();
                const x = e.clientX - rect.left;
                const width = rect.width;
                this.el.currentTime = (x / width) * this.el.duration;
            }
        };

        // --- CELEBRATION ENGINE ---
        const party = {
            blast() {
                const colors = ['#6750A4', '#FFD8E4', '#B5007D', '#EADDFF'];
                confetti({
                    particleCount: 150,
                    spread: 70,
                    origin: { y: 0.6 },
                    colors: colors
                });
            },

            autoTimer() {
                setInterval(() => {
                    if (state.unlocked) {
                        confetti({
                            particleCount: 15,
                            angle: 60,
                            spread: 55,
                            origin: { x: 0 },
                            colors: ['#6750A4']
                        });
                        confetti({
                            particleCount: 15,
                            angle: 120,
                            spread: 55,
                            origin: { x: 1 },
                            colors: ['#B5007D']
                        });
                    }
                }, 8000);
            }
        };

        // --- UI & STATE ENGINE ---
        const ui = {
            switchLang(lang) {
                state.currentLang = lang;
                
                // Toggle Buttons
                document.getElementById('nl-tab').classList.toggle('active', lang === 'nl');
                document.getElementById('en-tab').classList.toggle('active', lang === 'en');
                
                // Toggle Lyrics
                document.getElementById('lyrics-nl').classList.toggle('hidden', lang !== 'nl');
                document.getElementById('lyrics-en').classList.toggle('hidden', lang !== 'en');
                
                // Update Music Source
                audio.updateSource(lang);
                
                // Visual burst
                party.blast();
            },

            initVisualizer() {
                const container = document.getElementById('visualizer');
                for (let i = 0; i < 20; i++) {
                    const bar = document.createElement('div');
                    bar.className = 'bar';
                    container.appendChild(bar);
                }
                
                // Simple animation for visualizer
                setInterval(() => {
                    document.querySelectorAll('.bar').forEach(bar => {
                        const h = Math.random() * 40 + 10;
                        bar.style.height = h + 'px';
                    });
                }, 150);
            },

            saveWish() {
                const name = document.getElementById('guest-name').value;
                const msg = document.getElementById('guest-msg').value;
                if (!name || !msg) return;
                
                const wish = { name, msg, date: new Date().toLocaleDateString() };
                state.wishes.unshift(wish);
                localStorage.setItem('mayaWishes', JSON.stringify(state.wishes));
                
                document.getElementById('guest-name').value = '';
                document.getElementById('guest-msg').value = '';
                this.renderWishes();
                party.blast();
            },

            renderWishes() {
                const list = document.getElementById('wishes-list');
                list.innerHTML = state.wishes.map(w => `
                    <div style="border-left: 3px solid var(
