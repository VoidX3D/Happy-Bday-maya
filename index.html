<!DOCTYPE html>
<html lang="nl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Maya's Royal Birthday | Expressive M3</title>
    
    <!-- Material 3 & GSAP Scripts -->
    <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Rounded:opsz,wght,FILL,GRAD@24,400,1,0" rel="stylesheet" />
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@300;600;800&family=Pacifico&display=swap" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>

    <style>
        :root {
            --m3-primary: #6750A4;
            --m3-on-primary: #FFFFFF;
            --m3-primary-container: #EADDFF;
            --m3-tertiary: #B5007D; 
            --m3-surface: #FFF7FF;
            --m3-radius: 32px;
            --spring: cubic-bezier(0.34, 1.56, 0.64, 1);
        }

        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }

        body, html {
            margin: 0; padding: 0; width: 100%; height: 100%;
            font-family: 'Plus Jakarta Sans', sans-serif;
            background-color: #000;
            overflow: hidden; color: #1C1B1F;
        }

        /* --- HEFTY MESH BACKGROUND --- */
        .mesh-canvas {
            position: fixed; inset: 0; z-index: -1;
            background: linear-gradient(45deg, #6750A4, #B5007D, #FFD8E4, #EADDFF);
            background-size: 400% 400%;
            animation: meshGradient 15s ease infinite;
            filter: brightness(0.9) contrast(1.1);
        }
        @keyframes meshGradient { 0% { background-position: 0% 50% } 50% { background-position: 100% 50% } 100% { background-position: 0% 50% } }

        /* --- SPLASH SCREEN (CRITICAL) --- */
        #splash {
            position: fixed; inset: 0;
            background: var(--m3-primary);
            z-index: 10000;
            display: flex; flex-direction: column;
            align-items: center; justify-content: center;
            color: white; cursor: pointer;
        }
        .gift-container { font-size: 150px; filter: drop-shadow(0 20px 40px rgba(0,0,0,0.5)); }

        /* --- MAIN VIEWPORT --- */
        #viewport {
            height: 100vh; overflow-y: auto; overflow-x: hidden;
            display: flex; flex-direction: column; align-items: center;
            padding: 40px 20px; perspective: 1000px;
            opacity: 0; visibility: hidden;
        }

        /* --- EXPRESSIVE HEADER --- */
        .maya-shimmer {
            font-family: 'Pacifico', cursive;
            font-size: clamp(4rem, 15vw, 7.5rem);
            background: linear-gradient(90deg, #FFFFFF, #FFD8E4, #FFFFFF);
            background-size: 200% auto;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            animation: shimmer 3s linear infinite;
            margin: 0;
        }
        @keyframes shimmer { to { background-position: 200% center; } }

        /* --- 3D INTERACTIVE CARD --- */
        .card-3d {
            background: rgba(255, 255, 255, 0.15);
            backdrop-filter: blur(25px);
            border: 1px solid rgba(255, 255, 255, 0.3);
            border-radius: var(--m3-radius);
            padding: 40px; width: 100%; max-width: 550px;
            box-shadow: 0 40px 100px rgba(0,0,0,0.3);
            text-align: center; transform-style: preserve-3d;
            margin-top: 20px;
        }

        /* --- M3 SEGMENTED TOGGLE --- */
        .toggle-group {
            display: inline-flex; background: rgba(0,0,0,0.2);
            padding: 5px; border-radius: 100px; margin-bottom: 30px;
        }
        .toggle-btn {
            border: none; padding: 12px 30px; border-radius: 100px;
            font-weight: 800; cursor: pointer; color: white;
            background: transparent; transition: 0.4s var(--spring);
        }
        .toggle-btn.active { background: white; color: var(--m3-primary); }

        .lyrics {
            font-size: 1.5rem; line-height: 1.6; min-height: 200px;
            color: white; text-shadow: 0 2px 10px rgba(0,0,0,0.3);
            display: flex; align-items: center; justify-content: center;
        }

        /* --- MUSIC PLAYER BAR --- */
        .music-bar {
            position: fixed; bottom: 20px; width: 90%; max-width: 400px;
            background: white; border-radius: 24px; padding: 15px 25px;
            display: flex; align-items: center; justify-content: space-between;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            z-index: 500;
        }

        .visualizer { display: flex; gap: 3px; align-items: flex-end; height: 30px; }
        .vis-bar { width: 4px; background: var(--m3-primary); border-radius: 10px; height: 10px; }

        .hidden { display: none; }
    </style>
</head>
<body>

    <div class="mesh-canvas"></div>

    <!-- üéÅ Splash Entrance -->
    <div id="splash" onclick="igniteMayaParty()">
        <div class="gift-container" id="gift">üéÅ</div>
        <h1 style="font-family: 'Pacifico'; margin-top: 20px;">Open je cadeau, Maya!</h1>
        <p style="letter-spacing: 2px; opacity: 0.8;">TAP TO START PARTY</p>
    </div>

    <!-- üì± Main App UI -->
    <div id="viewport">
        <h1 class="maya-shimmer">Maya!</h1>

        <div class="card-3d" id="main-card">
            <div class="toggle-group">
                <button id="nl-btn" class="toggle-btn active" onclick="switchMode('nl')">Nederlands</button>
                <button id="en-btn" class="toggle-btn" onclick="switchMode('en')">English</button>
            </div>

            <div class="lyrics">
                <div id="lyric-nl">
                    "Lang zal ze leven,<br>
                    Lang zal ze leven,<br>
                    Lang zal ze leven in de gloria,<br>
                    <span style="font-size: 2rem; display: block; margin-top: 10px;">HOERA! HOERA! ü•≥</span>"
                </div>
                <div id="lyric-en" class="hidden">
                    "Happy birthday to you,<br>
                    Happy birthday to you,<br>
                    Happy birthday dear <b>Maya</b>,<br>
                    Happy birthday to you! üéÇ"
                </div>
            </div>

            <button onclick="superBlast()" style="background: white; border: none; padding: 18px 40px; border-radius: 100px; font-weight: 800; cursor: pointer; color: var(--m3-primary); margin-top: 20px;">
                FEESTJE VIEREN! üéÜ
            </button>
        </div>

        <!-- Extra Feature: Moving Cake -->
        <div style="font-size: 5rem; margin-top: 40px; cursor: pointer;" onclick="superBlast()">üéÇ</div>
    </div>

    <!-- üéµ Audio Elements -->
    <audio id="audio-en" loop><source src="hbd.mp3" type="audio/mpeg"></audio>
    <audio id="audio-nl" loop><source src="https://www.soundhelix.com/examples/mp3/SoundHelix-Song-16.mp3" type="audio/mpeg"></audio>

    <div class="music-bar">
        <div class="visualizer" id="vis">
            <div class="vis-bar"></div><div class="vis-bar"></div><div class="vis-bar"></div>
            <div class="vis-bar"></div><div class="vis-bar"></div><div class="vis-bar"></div>
        </div>
        <div style="font-weight: 800; color: var(--m3-primary);" id="track-name">NEDERLANDS</div>
        <button onclick="superBlast()" style="border:none; background:none; cursor:pointer;"><span class="material-symbols-rounded">celebration</span></button>
    </div>

    <script>
        const enAudio = document.getElementById('audio-en');
        const nlAudio = document.getElementById('audio-nl');
        let currentLang = 'nl';

        // --- GSAP HEFTY ANIMATIONS ---
        function igniteMayaParty() {
            // Un-hide UI
            gsap.to("#splash", { scale: 1.5, opacity: 0, duration: 0.8, ease: "power4.in", onComplete: () => {
                document.getElementById('splash').style.display = 'none';
                document.getElementById('viewport').style.visibility = 'visible';
                gsap.to("#viewport", { opacity: 1, duration: 1 });
            }});

            // Entrance of card
            gsap.from("#main-card", { y: 200, rotationX: -45, duration: 1.5, ease: "elastic.out(1, 0.7)" });

            playMusic();
            superBlast();
            animateVisualizer();
            
            // Auto-confetti timer
            setInterval(superBlast, 8000);
        }

        // --- 3D CARD TILT EFFECT ---
        const card = document.getElementById('main-card');
        document.addEventListener('mousemove', (e) => {
            const x = (window.innerWidth / 2 - e.pageX) / 20;
            const y = (window.innerHeight / 2 - e.pageY) / 20;
            gsap.to(card, { rotationY: x, rotationX: -y, duration: 0.5 });
        });

        function switchMode(lang) {
            currentLang = lang;
            document.getElementById('nl-btn').classList.toggle('active', lang === 'nl');
            document.getElementById('en-btn').classList.toggle('active', lang === 'en');
            document.getElementById('lyric-nl').classList.toggle('hidden', lang !== 'nl');
            document.getElementById('lyric-en').classList.toggle('hidden', lang !== 'en');
            document.getElementById('track-name').innerText = lang === 'nl' ? "NEDERLANDS" : "HBD.MP3";
            
            playMusic();
            superBlast();
        }

        function playMusic() {
            enAudio.pause(); nlAudio.pause();
            if(currentLang === 'en') {
                enAudio.play().catch(e => console.log("HBD.mp3 file missing!"));
            } else {
                nlAudio.play();
            }
        }

        function superBlast() {
            const colors = ['#6750A4', '#B5007D', '#FFFFFF', '#FFD8E4'];
            confetti({ particleCount: 150, spread: 80, origin: { y: 0.6 }, colors: colors });
            // Secondary side blasts
            confetti({ particleCount: 50, angle: 60, spread: 55, origin: { x: 0 }, colors: colors });
            confetti({ particleCount: 50, angle: 120, spread: 55, origin: { x: 1 }, colors: colors });
        }

        function animateVisualizer() {
            const bars = document.querySelectorAll('.vis-bar');
            bars.forEach(bar => {
                gsap.to(bar, {
                    height: Math.random() * 30 + 5,
                    duration: 0.2,
                    repeat: -1,
                    yoyo: true,
                    ease: "power1.inOut"
                });
            });
        }
    </script>
</body>
                  </html>
